<!DOCTYPE HTML>
<html lang="en">


<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
    <meta name="keywords" content="SQL_notes_Mode, Naixin&#39;s blog">
    <meta name="baidu-site-verification" content>
    <meta name="google-site-verification" content>
    <meta name="360-site-verification" content>
    <meta name="description" content="Learning from https://mode.com/sql-tutorial/
Basic1.SELECT * FROM table

rename column names: 
SELECT west AS &amp;quot;West">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>SQL_notes_Mode | Naixin&#39;s blog</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">
    <style type="text/css">
        
    </style>

    <script src="/libs/jquery/jquery-2.2.0.min.js"></script>
    <script src="https://sdk.jinrishici.com/v2/browser/jinrishici.js" charset="utf-8"></script>
    <script>
        var _hmt = _hmt || [];
        (function () {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?46e79e71af0709a5b9106bf20cecc493";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>
<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>

<body>

    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">Naixin's blog</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fa fa-navicon"></i></a>
<ul class="right">
    
    <li class="hide-on-med-and-down">
        <a href="/" class="waves-effect waves-light">
            
            <span>Home</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/categories" class="waves-effect waves-light">
            
            <span>Learning notes</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/about" class="waves-effect waves-light">
            
            <span>About</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/friends" class="waves-effect waves-light">
            
            <span>Courses</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/contact" class="waves-effect waves-light">
            
            <span>Contact</span>
        </a>
    </li>
    
    <li>
        <a href="#searchModal" class="modal-trigger waves-effect waves-light">
            <i id="searchIcon" class="fa fa-search" title="Search"></i>
        </a>
    </li>
</ul>

<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">Naixin's blog</div>
        <div class="logo-desc">
            
            You never lose, you either win or learn.
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li>
            <a href="/" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-link"></i>
                
                Home
            </a>
        </li>
        
        <li>
            <a href="/categories" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-link"></i>
                
                Learning notes
            </a>
        </li>
        
        <li>
            <a href="/about" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-link"></i>
                
                About
            </a>
        </li>
        
        <li>
            <a href="/friends" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-link"></i>
                
                Courses
            </a>
        </li>
        
        <li>
            <a href="/contact" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-link"></i>
                
                Contact
            </a>
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/naixinzhang" class="waves-effect waves-light" target="_blank">
                <i class="fa fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>

        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/naixinzhang" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    
<script src="/libs/cryptojs/crypto-js.min.js"></script>
<script>
    (function() {
        let pwd = '';
        if (pwd && pwd.length > 0) {
            if (pwd !== CryptoJS.SHA256(prompt('请输入访问本文章的密码')).toString(CryptoJS.enc.Hex)) {
                alert('密码错误，将返回主页！');
                location.href = '/';
            }
        }
    })();
</script>




<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/26.jpg')">
    <div class="container">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <div class="description center-align post-title">
                        SQL_notes_Mode
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        margin: 35px 0 15px 0;
        padding-left: 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #toc-content .is-active-link::before {
        background-color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 20px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                        <a href="/tags/SQL-Learning-notes/" target="_blank">
                            <span class="chip bg-color">SQL Learning notes</span>
                        </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fa fa-bookmark fa-fw icon-category"></i>
                        
                        <a href="/categories/SQL/" class="post-category" target="_blank">
                            SQL
                        </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                <div class="post-date info-break-policy">
                    <i class="fa fa-calendar-minus-o fa-fw"></i>Publish Date:&nbsp;&nbsp;
                    2020-09-15
                </div>

                <div class="post-author info-break-policy">
                    <i class="fa fa-user-o fa-fw"></i>Author:&nbsp;&nbsp;
                    
                    Naixin Zhang
                    
                </div>

                
                
                <div class="info-break-policy">
                    <i class="fa fa-file-word-o fa-fw"></i>Word Count:&nbsp;&nbsp;
                    3k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="fa fa-clock-o fa-fw"></i>Read Times:&nbsp;&nbsp;
                    18 Min
                </div>
                
                

                
                <div id="busuanzi_container_page_pv" class="info-break-policy">
                    <i class="fa fa-eye fa-fw"></i>Read Count:&nbsp;&nbsp;
                    <span id="busuanzi_value_page_pv"></span>
                </div>
                
            </div>
        </div>
        <hr class="clearfix">
        <div class="card-content article-card-content">
            <div id="articleContent">
                <p>Learning from <a href="https://mode.com/sql-tutorial/" target="_blank" rel="noopener">https://mode.com/sql-tutorial/</a></p>
<h1 id="Basic"><a href="#Basic" class="headerlink" title="Basic"></a>Basic</h1><p><strong>1.SELECT * FROM table</strong></p>
<ul>
<li><p>rename column names: </p>
<pre><code>SELECT west AS &quot;West Region&quot; FROM tutorial.us_housing_units</code></pre></li>
</ul>
<p><strong>2.LIMIT</strong></p>
<p><strong>3.WHERE</strong>   </p>
<ul>
<li><p>Equal to    =</p>
</li>
<li><p>Not equal to    &lt;&gt; or !=</p>
</li>
<li><p>Greater than    &gt;</p>
</li>
<li><p>Less than    &lt;</p>
</li>
<li><p>Greater than or equal to    &gt;=</p>
</li>
<li><p>Less than or equal to    &lt;=</p>
</li>
<li><p>Arithmetic in SQL :
 You can perform arithmetic in SQL using the same operators you would in Excel: +, -, *, /.</p>
<pre><code> SELECT west + south AS south_plus_west 
 FROM tutorial.us_housing_units</code></pre><p> <strong>4.SQL Logical operators</strong></p>
</li>
<li><p><strong>LIKE</strong> allows you to match similar values, instead of exact values.
EX: include rows for which “group” starts with “Snoop” :</p>
<pre><code>SELECT *
FROM tutorial.billboard_top_100_year_end
WHERE &quot;group&quot; LIKE &#39;Snoop%&#39;</code></pre><p>(In general, putting double quotes around a word or phrase will indicate that you are referring to that    column name)
<strong><em>like is case_sensitive,ILIKE is not case sensitive.</em></strong>
You can also use _ (a single underscore) to substitute for an individual character:</p>
</li>
</ul>
<pre><code>SELECT *
tutorial.billboard_top_100_year_end
WHERE artist ILIKE &#39;dr_ke&#39;</code></pre><ul>
<li><p><strong>IN</strong> allows you to specify a list of values you’d like to include.
EX:</p>
<pre><code>SELECT *
tutorial.billboard_top_100_year_end
WHERE year_rank IN (1, 2, 3)</code></pre><p>  (non-numerical values, but they need to go inside single quotes. )</p>
<pre><code>SELECT *
FROM tutorial.billboard_top_100_year_end
WHERE artist IN (&#39;Taylor Swift&#39;, &#39;Usher&#39;, &#39;Ludacris&#39;)</code></pre></li>
<li><p><strong>BETWEEN</strong> allows you to select only rows within a certain range.</p>
</li>
<li><p><strong>IS NULL</strong> allows you to select rows that contain no data in a given column.</p>
<pre><code>  SELECT *
  FROM tutorial.billboard_top_100_year_end
WHERE artist IS NULL</code></pre></li>
</ul>
<pre><code>(WHERE artist = NULL will not work��you can&#39;t perform arithmetic on null values.)</code></pre><ul>
<li><p><strong>AND</strong> allows you to select only rows that satisfy two conditions.
You can use SQL’s AND operator with additional AND statements or any other comparison operator, as many times as you want.</p>
<pre><code>SELECT *
FROM tutorial.billboard_top_100_year_end
WHERE year = 2012 AND year_rank &lt;= 10 AND &quot;group&quot; ILIKE &#39;%feat%&#39;</code></pre></li>
<li><p><strong>OR</strong> allows you to select rows that satisfy either of two conditions.</p>
</li>
<li><p><strong>NOT</strong> allows you to select rows that do not match a certain condition.</p>
<p>  NOT is commonly used with LIKE.</p>
<pre><code>    SELECT *
    FROM tutorial.billboard_top_100_year_end
    WHERE year = 2013
    AND &quot;group&quot; NOT ILIKE &#39;%macklemore%&#39;</code></pre></li>
</ul>
<p>?      NOT is also frequently used to identify non-null rows</p>
<pre><code> SELECT *
 FROM tutorial.billboard_top_100_year_end
 WHERE year = 2013 AND artist IS NOT NULL</code></pre><ol start="5">
<li><p><strong>ORDER BY DESC</strong></p>
<p>You can also order by multiple columns. This is particularly useful if your data falls into categories and you’d like to organize rows by date, for example, but keep all of the results within a given category together.</p>
</li>
</ol>
<pre><code>SELECT *
FROM tutorial.billboard_top_100_year_end
WHERE year_rank &lt;= 3
ORDER BY year DESC, year_rank</code></pre><p>  you can make your life a little easier by substituting numbers for column names in the ORDER BY clause. The numbers will correspond to the order in which you list columns in the SELECT clause. </p>
<pre><code>SELECT *
tutorial.billboard_top_100_year_end
WHERE year_rank &lt;= 3
ORDER BY 2, 1 DESC</code></pre><p><strong>6.Using comments</strong>
    You can use– (two dashes) to comment out everything to the right of them on a given line:</p>
<pre><code>SELECT *  --This comment won&#39;t affect the way the code runs
FROM tutorial.billboard_top_100_year_end
WHERE year = 2013</code></pre><p>   You can also leave comments across multiple lines using /<em> to begin the comment and </em>/ to close it:      </p>
<pre><code>/* Here&#39;s a comment so long and descriptive that
it could only fit on multiple lines. Fortunately,
it, too, will not affect how this code runs. */
SELECT *
FROM tutorial.billboard_top_100_year_end
WHERE year = 2013</code></pre><h1 id="Intermediate"><a href="#Intermediate" class="headerlink" title="Intermediate"></a>Intermediate</h1><p>1.<strong>Aggregate functions</strong></p>
<ul>
<li><p>COUNT counts how many rows are in a particular column.</p>
<ul>
<li><p>Typing COUNT(1) has the same effect as COUNT(*). Which one you use is a matter of personal preference.</p>
</li>
<li><p>Counting individual columns
Count of all of rows in which the high column is not null:</p>
</li>
</ul>
<pre><code>  SELECT COUNT(high)
  FROM tutorial.aapl_historical_stock_prie</code></pre></li>
<li><p>SUM adds together all the values in a particular column.
you can only use SUM on columns containing numerical values.
You don’t need to worry as much about the presence of nulls with SUM as you would with COUNT, as SUM treats nulls as 0.</p>
</li>
<li><p>MIN and MAX return the lowest and highest values in a particular column, respectively.
They’re similar to COUNT in that they can be used on non-numerical columns. Depending on the column type, MIN will return the lowest number, earliest date, or non-numerical value as close alphabetically to “A” as possible.</p>
</li>
<li><p>AVG calculates the average of a group of selected values.
First, it can only be used on numerical columns. Second, it ignores nulls completely.</p>
</li>
</ul>
<p><strong>2.GROUP BY</strong>
You can group by multiple columns. The order of column names in your GROUP BY clause doesn’t matter����the results will be the same regardless. If you want to control how the aggregations are grouped together, use ORDER BY.</p>
<p><strong>3.HAVING</strong>
  Having is the “clean” way to filter a query that has been aggregated,The WHERE clause won’t work for filtering on aggregate columns</p>
<pre><code>SELECT year,
       month,
       MAX(high) AS month_high
FROM tutorial.aapl_historical_stock_price
GROUP BY year, month
HAVING MAX(high) &gt; 400
ORDER BY year, month</code></pre><p><strong>4.DISTINCT</strong></p>
<p>  Only the unique values in a particular column
  If you include two (or more) columns in a SELECT DISTINCT clause, your results will contain all of the unique pairs of those two columns:</p>
<pre><code>SELECT DISTINCT year, month
FROM tutorial.aapl_historical_stock_price</code></pre><p>DISTINCT goes inside the aggregate function rather than at the beginning of the SELECT clause:</p>
<pre><code>SELECT COUNT(DISTINCT month) AS unique_months
FROM tutorial.aapl_historical_stock_price</code></pre><p><strong>5.CASE</strong>
  Every CASE statement must end with the END statement. The ELSE statement is optional:</p>
<pre><code>CASE WHEN...THEN
END</code></pre><pre><code>  SELECT player_name,
         year,
         CASE WHEN year = &#39;SR&#39; THEN &#39;yes&#39;
         ELSE NULL END AS is_a_senior
  FROM benn.college_football_players</code></pre><pre><code>SELECT player_name,
         weight,
         CASE WHEN weight &gt; 250 THEN &#39;over 250&#39;
              WHEN weight &gt; 200 THEN &#39;201-250&#39;
              WHEN weight &gt; 175 THEN &#39;176-200&#39;
              ELSE &#39;175 or under&#39; END AS weight_group
  FROM benn.college_football_players</code></pre><p><strong>6.Joins</strong></p>
<pre><code> SELECT teams.conference AS conference,
         AVG(players.weight) AS average_weight
  FROM benn.college_football_players players
  JOIN benn.college_football_teams teams
  ON teams.school_name = players.school_name
  GROUP BY teams.conference
  ORDER BY AVG(players.weight) DESC</code></pre><ul>
<li><p>inner join
Inner joins eliminate rows from both tables that do not satisfy the join condition set forth in the ON statement. In mathematical terms, an inner join is the intersection of the two tables.
rename column names:</p>
</li>
<li><p>outer join</p>
<ul>
<li>LEFT JOIN returns only unmatched rows from the left table.</li>
<li>RIGHT JOIN returns only unmatched rows from the right table.</li>
<li>FULL OUTER JOIN returns unmatched rows from both tables.</li>
</ul>
</li>
</ul>
<p>   Filtering in the ON clause: filter one or both of the tables before joining them</p>
<pre><code>   SELECT companies.permalink AS companies_permalink,
       companies.name AS companies_name,
       acquisitions.company_permalink AS acquisitions_permalink,
       acquisitions.acquired_at AS acquired_date
   FROM tutorial.crunchbase_companies companies
   LEFT JOIN tutorial.crunchbase_acquisitions acquisitions
   ON companies.permalink = acquisitions.company_permalink
   AND acquisitions.company_permalink != &#39;/company/1000memories&#39;
   ORDER BY 1</code></pre><p>   Filtering in the WHERE clause:(Join  then filter)</p>
<pre><code>   SELECT companies.permalink AS companies_permalink,
       companies.name AS companies_name,
       acquisitions.company_permalink AS acquisitions_permalink,
       acquisitions.acquired_at AS acquired_date
   FROM tutorial.crunchbase_companies companies
   LEFT JOIN tutorial.crunchbase_acquisitions acquisitions
   ON companies.permalink = acquisitions.company_permalink
   WHERE acquisitions.company_permalink != &#39;/company/1000memories&#39;
   OR acquisitions.company_permalink IS NULL
   ORDER BY 1</code></pre><ul>
<li><p>Joining on multiple keys
why? The first has to do with accuracy.</p>
<pre><code> The second reason has to do with performance. SQL uses &quot;indexes&quot; (essentially pre-defined joins) to speed up queries</code></pre></li>
<li><p>Self join 
Sometimes it can be useful to join a table to itself. Let����s say you wanted to identify companies that received an investment from Great Britain following an investment from Japan.</p>
</li>
</ul>
<pre><code>SELECT DISTINCT japan_investments.company_name,
       japan_investments.company_permalink
  FROM tutorial.crunchbase_investments_part1 japan_investments
  JOIN tutorial.crunchbase_investments_part1 gb_investments
    ON japan_investments.company_name = gb_investments.company_name
   AND gb_investments.investor_country_code = &#39;GBR&#39;
   AND gb_investments.funded_at &gt; japan_investments.funded_at
 WHERE japan_investments.investor_country_code = &#39;JPN&#39;
 ORDER BY 1</code></pre><ol start="7">
<li><p><strong>UNION</strong>
SQL joins allow you to combine two datasets side-by-side, but UNION allows you to stack one dataset on top of the other
SQL has strict rules for appending data:</p>
<ul>
<li>Both tables must have the same number of columns</li>
<li>The columns must have the same data types in the same order as the first table
column names don’t necessarily have to be the same</li>
</ul>
</li>
</ol>
<p>tips:
1.If you must use spaces in naming, you will need to use double quotes:
  SELECT COUNT(date) AS “Count Of Date”
  FROM tutorial.aapl_historical_stock_price
2.Query clause order:</p>
<ul>
<li>SELECT</li>
<li>FROM</li>
<li>WHERE</li>
<li>GROUP BY</li>
<li>HAVING</li>
<li>ORDER BY</li>
</ul>
<h1 id="ADVANCED"><a href="#ADVANCED" class="headerlink" title="ADVANCED"></a>ADVANCED</h1><p>Data Type**</p>
<table>
<thead>
<tr>
<th>Imported as</th>
<th>Stored as</th>
<th>With these rules</th>
</tr>
</thead>
<tbody><tr>
<td>String</td>
<td>VARCHAR(1024)</td>
<td>Any characters, with a maximum field length of 1024 characters.</td>
</tr>
<tr>
<td>Date/Time</td>
<td>TIMESTAMP</td>
<td>Stores year, month, day, hour, minute and second values as YYYY-MM-DD hh:mm:ss.</td>
</tr>
<tr>
<td>Number</td>
<td>DOUBLE PRECISION</td>
<td>Numerical, with up to 17 significant digits decimal precision.</td>
</tr>
<tr>
<td>Boolean</td>
<td>BOOLEAN</td>
<td>Only TRUE or FALSE values.</td>
</tr>
</tbody></table>
<p>Changing a column’s data type��</p>
<p>two types: <code>CAST(column_name AS integer)</code> and <code>column_name::integer</code> </p>
<p><strong>2.Data Format</strong></p>
<pre><code>SELECT companies.permalink,
       companies.founded_at_clean,
       acquisitions.acquired_at_cleaned,
       acquisitions.acquired_at_cleaned -
         companies.founded_at_clean::timestamp AS time_to_acquisition
  FROM tutorial.crunchbase_companies_clean_date companies
  JOIN tutorial.crunchbase_acquisitions_clean_date acquisitions
    ON acquisitions.company_permalink = companies.permalink
 WHERE founded_at_clean IS NOT NULL</code></pre><pre><code>SELECT companies.permalink,       
       companies.founded_at_clean,       
       companies.founded_at_clean::timestamp +         
       INTERVAL &#39;1 week&#39; AS plus_one_week  
       FROM tutorial.crunchbase_companies_clean_date companies WHERE founded_at_clean IS NOT NULL</code></pre><pre><code>SELECT companies.permalink,       
companies.founded_at_clean,       
NOW() - companies.founded_at_clean::timestamp AS founded_time_ago  
FROM tutorial.crunchbase_companies_clean_date companies WHERE founded_at_clean IS NOT NULL</code></pre><pre><code>SELECT
    DATE_FORMAT(wk,&#39;%Y%m%d&#39;),
    wk,
    song
 FROM totp
 WHERE singer=&#39;Madness&#39;</code></pre><p><strong>3.Data Wrangling with SQL</strong></p>
<p><strong>4.Using SQL String Functions to Clean data</strong></p>
<p><strong>LEFT, RIGHT, LENGTH</strong></p>
<p><code>LEFT(string, number of characters)</code></p>
<pre><code>SELECT incidnt_num,
        date,       
        LEFT(date, 10) AS cleaned_date  
FROM tutorial.sf_crime_incidents_2014_01</code></pre><pre><code>SELECT incidnt_num,       
       date,       
       LEFT(date, 10) AS cleaned_date,       
       RIGHT(date, LENGTH(date) - 11) AS cleaned_time  
       FROM tutorial.sf_crime_incidents_2014_01</code></pre><p><strong>TRIM</strong></p>
<pre><code>SELECT location,       
TRIM(both &#39;()&#39; FROM location)  
FROM tutorial.sf_crime_incidents_2014_01</code></pre><p><strong>POSITION</strong> <strong>and STRPOS</strong></p>
<p>Importantly, both the <code>POSITION</code> and <code>STRPOS</code> functions are case-sensitive. If you want to look for a character regardless of its case, you can make your entire string a single by using the <code>UPPER</code> or <code>LOWER</code> functions described below.</p>
<p><code>POSITION</code> allows you to specify a substring, then returns a numerical value equal to the character number (counting from left) where that substring first appears in the target string. For example, the following query will return the position of the character ‘A’ (case-sensitive) where it first appears in the <code>descript</code> field:</p>
<pre><code>SELECT incidnt_num,       
       descript,       
       POSITION(&#39;A&#39; IN descript) AS a_position  
FROM tutorial.sf_crime_incidents_2014_01</code></pre><p>You can also use the <code>STRPOS</code> function to achieve the same results?just replace <code>IN</code> with a comma and switch the order of the string and substring:</p>
<pre><code>SELECT incidnt_num,       
       descript,       
       STRPOS(descript, &#39;A&#39;) AS a_position  
FROM tutorial.sf_crime_incidents_2014_01</code></pre><p><strong>SUBSTR</strong></p>
<pre><code>SELECT incidnt_num,       
       date,       
       SUBSTR(date, 4, 2) AS day  
FROM tutorial.sf_crime_incidents_2014_01</code></pre><p><strong>CONCAT</strong></p>
<pre><code>SELECT incidnt_num,      
       day_of_week,       
       LEFT(date, 10) AS cleaned_date,       
       CONCAT(day_of_week, &#39;, &#39;, LEFT(date, 10)) AS day_and_date  
FROM tutorial.sf_crime_incidents_2014_01</code></pre><p>Alternatively, you can use two pipe characters (<code>||</code>) to perform the same concatenation:</p>
<pre><code>SELECT incidnt_num,       
       day_of_week,       
       LEFT(date, 10) AS cleaned_date,       
       day_of_week || &#39;, &#39; || LEFT(date, 10) AS day_and_date  
       UPPER(address) AS address_upper,
       LOWER(address) AS address_lower
FROM tutorial.sf_crime_incidents_2014_01</code></pre><p><strong>Turning strings into dates</strong></p>
<pre><code>SELECT incidnt_num,date,       
       (SUBSTR(date, 7, 4) || &#39;-&#39; || LEFT(date, 2) ||&#39;-&#39; || SUBSTR(date, 4, 2))::date AS cleaned_date  
FROM tutorial.sf_crime_incidents_2014_01</code></pre><pre><code>SELECT cleaned_date,       
       EXTRACT(&#39;year&#39; FROM cleaned_date) AS year,       
       EXTRACT(&#39;month&#39;  FROM cleaned_date) AS month,       
       EXTRACT(&#39;day&#39;    FROM cleaned_date) AS day,       
       EXTRACT(&#39;hour&#39;   FROM cleaned_date) AS hour,       
       EXTRACT(&#39;minute&#39; FROM cleaned_date) AS minute,       
       EXTRACT(&#39;second&#39; FROM cleaned_date) AS second,       
       EXTRACT(&#39;decade&#39; FROM cleaned_date) AS decade,       
       EXTRACT(&#39;dow&#39;    FROM cleaned_date) AS day_of_week  
FROM tutorial.sf_crime_incidents_cleandate</code></pre><p>You can also round dates to the nearest unit of measurement. This is particularly useful if you don’t care about an individual date, but do care about the week (or month, or quarter) that it occurred in. The <code>DATE_TRUNC</code>function rounds a date to whatever precision you specify. The value displayed is the first value in that period. So when you <code>DATE_TRUNC</code> by year, any value in that year will be listed as January 1st of that year:</p>
<pre><code>SELECT cleaned_date,       
       DATE_TRUNC(&#39;year&#39;   , cleaned_date) AS year,       
       DATE_TRUNC(&#39;month&#39;  , cleaned_date) AS month,       
       DATE_TRUNC(&#39;week&#39;   , cleaned_date) AS week,       
       DATE_TRUNC(&#39;day&#39;    , cleaned_date) AS day,      
       DATE_TRUNC(&#39;hour&#39;   , cleaned_date) AS hour,       
       DATE_TRUNC(&#39;minute&#39; , cleaned_date) AS minute,       
       DATE_TRUNC(&#39;second&#39; , cleaned_date) AS second,       
       DATE_TRUNC(&#39;decade&#39; , cleaned_date) AS decade  
FROM tutorial.sf_crime_incidents_cleandate</code></pre><pre><code>SELECT CURRENT_DATE AS date,       
       CURRENT_TIME AS time,       
       CURRENT_TIMESTAMP AS timestamp,       
       LOCALTIME AS localtime,       
       LOCALTIMESTAMP AS localtimestamp,       
       NOW() AS now</code></pre><pre><code>SELECT CURRENT_TIME AS time,       
CURRENT_TIME AT TIME ZONE &#39;PST&#39; AS time_pst</code></pre><p><strong>COALESCE</strong></p>
<pre><code>SELECT incidnt_num,       
       descript,       
       COALESCE(descript, &#39;No Description&#39;)  
FROM tutorial.sf_crime_incidents_cleandate 
ORDER BY descript DESC</code></pre><p><strong>5.Writing subqueries in SQL</strong></p>
<p><strong>6.SQL window functions</strong></p>
<ul>
<li>Basic windowing syntax</li>
</ul>
<pre><code>SELECT start_terminal,
       duration_seconds,
       SUM(duration_seconds) OVER
         (PARTITION BY start_terminal) AS running_total,
       COUNT(duration_seconds) OVER
         (PARTITION BY start_terminal) AS running_count,
       AVG(duration_seconds) OVER
         (PARTITION BY start_terminal) AS running_avg
  FROM tutorial.dc_bikeshare_q1_2012
 WHERE start_time &lt; &#39;2012-01-08&#39;</code></pre><ul>
<li>ROW_NUMBER()
displays the number of a given row. It starts are 1 and numbers the rows according to the ORDER BY part of the window statement. ROW_NUMBER() does not require you to specify a variable within the parentheses:</li>
</ul>
<pre><code>SELECT start_terminal,
       start_time,
       duration_seconds,
       ROW_NUMBER() OVER (ORDER BY start_time)
                    AS row_number
  FROM tutorial.dc_bikeshare_q1_2012
 WHERE start_time &lt; &#39;2012-01-08&#39;</code></pre><p>Using the PARTITION BY clause will allow you to begin counting 1 again in each partition. The following query starts the count over again for each terminal:</p>
<pre><code>SELECT start_terminal,
       start_time,
       duration_seconds,
       ROW_NUMBER() OVER (PARTITION BY start_terminal
                          ORDER BY start_time)
                    AS row_number
  FROM tutorial.dc_bikeshare_q1_2012
 WHERE start_time &lt; &#39;2012-01-08&#39;</code></pre><ul>
<li>RANK() and DENSE_RANK()
RANK() would give the identical rows a rank of 2, then skip ranks 3 and 4, so the next result would be 5
DENSE_RANK() would still give all the identical rows a rank of 2, but the following row would be 3?no ranks would be skipped.</li>
</ul>
<pre><code>SELECT start_terminal,
       duration_seconds,
       RANK() OVER (PARTITION BY start_terminal
                    ORDER BY start_time)
              AS rank
  FROM tutorial.dc_bikeshare_q1_2012
 WHERE start_time &lt; &#39;2012-01-08&#39;</code></pre><ul>
<li>NTILE
NTILE(<em># of buckets</em>) identify what percentile a given row falls into. In this case, ORDER BY determines which column to use to determine the quartiles (or whatever number of ‘tiles you specify). For example:</li>
</ul>
<pre><code>SELECT start_terminal,
       duration_seconds,
       NTILE(4) OVER
         (PARTITION BY start_terminal ORDER BY duration_seconds)
          AS quartile,
       NTILE(5) OVER
         (PARTITION BY start_terminal ORDER BY duration_seconds)
         AS quintile,
       NTILE(100) OVER
         (PARTITION BY start_terminal ORDER BY duration_seconds)
         AS percentile
  FROM tutorial.dc_bikeshare_q1_2012
 WHERE start_time &lt; &#39;2012-01-08&#39;
 ORDER BY start_terminal, duration_seconds</code></pre><ul>
<li>LAG and LEAD</li>
</ul>
<p>It can often be useful to compare rows to preceding or following rows, especially if you’ve got the data in an order that makes sense. You can use LAG or LEAD to create columns that pull values from other rows?all you need to do is enter which column to pull from and how many rows away you’d like to do the pull. LAG pulls from previous rows and LEAD pulls from following rows:</p>
<pre><code>SELECT start_terminal,
       duration_seconds,
       LAG(duration_seconds, 1) OVER
         (PARTITION BY start_terminal ORDER BY duration_seconds) AS lag,
       LEAD(duration_seconds, 1) OVER
         (PARTITION BY start_terminal ORDER BY duration_seconds) AS lead
  FROM tutorial.dc_bikeshare_q1_2012
 WHERE start_time &lt; &#39;2012-01-08&#39;
 ORDER BY start_terminal, duration_seconds</code></pre><p>This is especially useful if you want to calculate differences between rows:</p>
<pre><code>SELECT start_terminal,
       duration_seconds,
       duration_seconds -LAG(duration_seconds, 1) OVER
         (PARTITION BY start_terminal ORDER BY duration_seconds)
         AS difference
  FROM tutorial.dc_bikeshare_q1_2012
 WHERE start_time &lt; &#39;2012-01-08&#39;
 ORDER BY start_terminal, duration_seconds</code></pre><p>The first row of the difference column is null because there is no previous row from which to pull. Similarly, using LEAD will create nulls at the end of the dataset. If you’d like to make the results a bit cleaner, you can wrap it in an outer query to remove nulls:</p>
<pre><code>SELECT *
  FROM (
    SELECT start_terminal,
           duration_seconds,
           duration_seconds -LAG(duration_seconds, 1) OVER
             (PARTITION BY start_terminal ORDER BY duration_seconds)
             AS difference
      FROM tutorial.dc_bikeshare_q1_2012
     WHERE start_time &lt; &#39;2012-01-08&#39;
     ORDER BY start_terminal, duration_seconds
       ) sub
 WHERE sub.difference IS NOT NULL</code></pre><ul>
<li>Defining a windows alias
If you’re planning to write several window functions in to the same query, using the same window, you can create an alias. Take the NTILE example above:</li>
</ul>
<pre><code>SELECT start_terminal,
       duration_seconds,
       NTILE(4) OVER
         (PARTITION BY start_terminal ORDER BY duration_seconds)
         AS quartile,
       NTILE(5) OVER
         (PARTITION BY start_terminal ORDER BY duration_seconds)
         AS quintile,
       NTILE(100) OVER
         (PARTITION BY start_terminal ORDER BY duration_seconds)
         AS percentile
  FROM tutorial.dc_bikeshare_q1_2012
 WHERE start_time &lt; &#39;2012-01-08&#39;
 ORDER BY start_terminal, duration_seconds</code></pre><p>This can be rewritten as:</p>
<pre><code>SELECT start_terminal,
       duration_seconds,
       NTILE(4) OVER ntile_window AS quartile,
       NTILE(5) OVER ntile_window AS quintile,
       NTILE(100) OVER ntile_window AS percentile
  FROM tutorial.dc_bikeshare_q1_2012
 WHERE start_time &lt; &#39;2012-01-08&#39;
WINDOW ntile_window AS
         (PARTITION BY start_terminal ORDER BY duration_seconds)
 ORDER BY start_terminal, duration_seconds</code></pre><p><strong>7.Performance Tunning SQL Queries</strong></p>
<p><strong>8.Pivoting Data in SQL</strong></p>
<pre><code>SELECT conference,
       SUM(players) AS total_players,
       SUM(CASE WHEN year = &#39;FR&#39; THEN players ELSE NULL END) AS fr,
       SUM(CASE WHEN year = &#39;SO&#39; THEN players ELSE NULL END) AS so,
       SUM(CASE WHEN year = &#39;JR&#39; THEN players ELSE NULL END) AS jr,
       SUM(CASE WHEN year = &#39;SR&#39; THEN players ELSE NULL END) AS sr
  FROM (
        SELECT teams.conference AS conference,
               players.year,
               COUNT(1) AS players
          FROM benn.college_football_players players
          JOIN benn.college_football_teams teams
            ON teams.school_name = players.school_name
         GROUP BY 1,2
       ) sub
 GROUP BY 1
 ORDER BY 2 DESC</code></pre><h1 id="Table-Manipulation"><a href="#Table-Manipulation" class="headerlink" title="Table Manipulation"></a>Table Manipulation</h1><pre><code>INSERT INTO Customers (CustomerName, ContactName, Address, City, PostalCode, Country)
VALUES (&#39;Cardinal&#39;, &#39;Tom B. Erichsen&#39;, &#39;Skagen 21&#39;, &#39;Stavanger&#39;, &#39;4006&#39;, &#39;Norway&#39;);</code></pre><pre><code>UPDATE Customers
SET ContactName = &#39;Alfred Schmidt&#39;, City= &#39;Frankfurt&#39;
WHERE CustomerID = 1;</code></pre><pre><code>DELETE FROM Customers WHERE CustomerName=&#39;Alfreds Futterkiste&#39;;</code></pre>
            </div>
            <hr />

            

            <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">

<div id="article-share">
    
    <div class="social-share" data-disabled="qzone, qq, weibo, douban"></div>
    
</div>

<script src="/libs/share/js/social-share.min.js"></script>

            


        </div>
    </div>

    
    <link rel="stylesheet" href="/libs/gitalk/gitalk.css">
<link rel="stylesheet" href="/css/my-gitalk.css">

<div class="card gitalk-card" data-aos="fade-up">
    <div id="gitalk-container" class="card-content"></div>
</div>

<script src="/libs/gitalk/gitalk.min.js"></script>
<script>
    let gitalk = new Gitalk({
        clientID: 'c090019fe3f06f8ef15d',
        clientSecret: '9f220a5e71efc340544fce7ae397f63151db8747',
        repo: 'naixinzhang.github.io',
        owner: 'naixinzhang',
        admin: "naixinzhang",
        id: '2020/09/15/mysql/sql-notes-mode/',
        distractionFreeMode: false  // Facebook-like distraction free mode
    });

    gitalk.render('gitalk-container');
</script>
    

    

    

    

    
    <style>
    .valine-card {
        margin: 1.5rem auto;
    }

    .valine-card .card-content {
        padding: 20px 20px 5px 20px;
    }

    #vcomments input[type=text],
    #vcomments input[type=email],
    #vcomments input[type=url],
    #vcomments textarea {
        box-sizing: border-box;
    }

    #vcomments p {
        margin: 2px 2px 10px;
        font-size: 1.05rem;
        line-height: 1.78rem;
    }

    #vcomments blockquote p {
        text-indent: 0.2rem;
    }

    #vcomments a {
        padding: 0 2px;
        color: #42b983;
        font-weight: 500;
        text-decoration: underline;
    }

    #vcomments img {
        max-width: 100%;
        height: auto;
        cursor: pointer;
    }

    #vcomments ol li {
        list-style-type: decimal;
    }

    #vcomments ol,
    ul {
        display: block;
        padding-left: 2em;
        word-spacing: 0.05rem;
    }

    #vcomments ul li,
    ol li {
        display: list-item;
        line-height: 1.8rem;
        font-size: 1rem;
    }

    #vcomments ul li {
        list-style-type: disc;
    }

    #vcomments ul ul li {
        list-style-type: circle;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    #vcomments table, th, td {
        border: 0;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments h1 {
        font-size: 1.85rem;
        font-weight: bold;
        line-height: 2.2rem;
    }

    #vcomments h2 {
        font-size: 1.65rem;
        font-weight: bold;
        line-height: 1.9rem;
    }

    #vcomments h3 {
        font-size: 1.45rem;
        font-weight: bold;
        line-height: 1.7rem;
    }

    #vcomments h4 {
        font-size: 1.25rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    #vcomments h5 {
        font-size: 1.1rem;
        font-weight: bold;
        line-height: 1.4rem;
    }

    #vcomments h6 {
        font-size: 1rem;
        line-height: 1.3rem;
    }

    #vcomments p {
        font-size: 1rem;
        line-height: 1.5rem;
    }

    #vcomments hr {
        margin: 12px 0;
        border: 0;
        border-top: 1px solid #ccc;
    }

    #vcomments blockquote {
        margin: 15px 0;
        border-left: 5px solid #42b983;
        padding: 1rem 0.8rem 0.3rem 0.8rem;
        color: #666;
        background-color: rgba(66, 185, 131, .1);
    }

    #vcomments pre {
        font-family: monospace, monospace;
        padding: 1.2em;
        margin: .5em 0;
        background: #272822;
        overflow: auto;
        border-radius: 0.3em;
        tab-size: 4;
    }

    #vcomments code {
        font-family: monospace, monospace;
        padding: 1px 3px;
        font-size: 0.92rem;
        color: #e96900;
        background-color: #f8f8f8;
        border-radius: 2px;
    }

    #vcomments pre code {
        font-family: monospace, monospace;
        padding: 0;
        color: #e8eaf6;
        background-color: #272822;
    }

    #vcomments pre[class*="language-"] {
        padding: 1.2em;
        margin: .5em 0;
    }

    #vcomments code[class*="language-"],
    pre[class*="language-"] {
        color: #e8eaf6;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }

    #vcomments b,
    strong {
        font-weight: bold;
    }

    #vcomments dfn {
        font-style: italic;
    }

    #vcomments small {
        font-size: 85%;
    }

    #vcomments cite {
        font-style: normal;
    }

    #vcomments mark {
        background-color: #fcf8e3;
        padding: .2em;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }
</style>

<div class="card valine-card" data-aos="fade-up">
    <div id="vcomments" class="card-content"></div>
</div>

<script src="/libs/valine/av-min.js"></script>
<script src="/libs/valine/Valine.min.js"></script>
<!-- <script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script> -->

<script>
    new Valine({
        el: '#vcomments',
        appId: '',
        appKey: '',
        notify: 'false' === 'true',
        verify: 'false' === 'true',
        visitor: 'false' === 'true',
        avatar: 'wavatar',
        pageSize: '10',
        lang: 'en',
        placeholder: '如果你没有GitHub账号，还可以在这里评论啦！'
    });
</script>

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fa fa-chevron-left"></i>&nbsp;Previous</div>
            <div class="card">
                <a href="/2020/09/16/mysql/wei-3-tong-suo-cun-zhe/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/0.jpg" class="responsive-img" alt="">
                        
                        <span class="card-title"></span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            https://www.1point3acres.com/bbs/interview/amazon-data-science-478865.html
亚麻BIE physical retail seatle
1)一个manuafacture
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="fa fa-clock-o fa-fw icon-date"></i>2020-09-16
                        </span>
                        <span class="publish-author">
                            
                        </span>
                    </div>
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                Next&nbsp;<i class="fa fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2020/09/10/mysql/sql-leetcode2-by-tag/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/8.jpg" class="responsive-img" alt="2.0_leetcode_database_practice">
                        
                        <span class="card-title">2.0_leetcode_database_practice</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            EASY tag:176.
SELECT IFNULL(
    (SELECT ...
    LIMIT 1 OFFSET 1,NULL
) AS SecondHighestSalary


SELECT MAX(salary) AS 
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="fa fa-clock-o fa-fw icon-date"></i>2020-09-10
                            </span>
                        <span class="publish-author">
                            
                            <i class="fa fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/SQL/" class="post-category" target="_blank">
                                    SQL
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/SQL-Learning-notes/" target="_blank">
                        <span class="chip bg-color">SQL Learning notes</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>
</div>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget">
            <div class="toc-title"><i class="fa fa-list-alt"></i>&nbsp;&nbsp;TOC</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fa fa-list"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            // headingsOffset: -205,
            headingSelector: 'h1, h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h1, h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).slideUp(500);
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).slideDown(500);
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>
    

</main>


    <footer class="page-footer bg-color center-align">
    <div class="container row center-align">
        <div class="copy-right">
            &copy; 2020 NaixinZhang. All Rights Reserved.
        </div>
    </div>
</footer>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fa fa-search"></i>&nbsp;&nbsp;Search</span>
            <input type="search" id="searchInput" name="s" placeholder="Please enter a search keyword"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script src="/js/search.js"></script>
<script type="text/javascript">
$(function () {
    searchFunc("/" + "search.xml", 'searchInput', 'searchResult');
});
</script>
    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fa fa-angle-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <script type="text/javascript"> var OriginTitile = document.title, st; document.addEventListener("visibilitychange", function () { document.hidden ? (document.title = "Σ(っ °Д °;)っ喔哟，崩溃啦！", clearTimeout(st)) : (document.title = "φ(゜▽゜*)♪咦，又好了！", st = setTimeout(function () { document.title = OriginTitile }, 3e3)) })
    </script>

    <!-- Global site tag (gtag.js) - Google Analytics -->

<script async src="https://www.googletagmanager.com/gtag/js?id="></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
        dataLayer.push(arguments);
    }

    gtag('js', new Date());
    gtag('config', '');
</script>



    
    <script src="/libs/others/clicklove.js"></script>
    

    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    <!-- 雪花特效 -->
    

</body>

</html>